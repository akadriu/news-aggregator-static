"use strict";(self.webpackChunknews_aggregator=self.webpackChunknews_aggregator||[]).push([[606],{606:(e,r,a)=>{a.r(r),a.d(r,{default:()=>o});var t=a(43),s=a(213),n=a(216),l=a(688),c=a(475),i=a(579);const o=()=>{const{category:e}=(0,n.g)(),r=(0,n.Zp)(),[a,o]=(0,t.useState)([]),[h,d]=(0,t.useState)(!0),[g,p]=(0,t.useState)(null);(0,t.useEffect)((()=>{d(!0),p(null),o([]),s.A.get("".concat("https://news-aggregator-backend-4zpx.onrender.com","/category/").concat(e)).then((e=>{if(e.data&&"object"===typeof e.data){const r=Object.entries(e.data);o(r)}else o([]);d(!1)})).catch((a=>{console.error("Error fetching data for category ".concat(e,":"),a),p(a),d(!1),a.response&&404===a.response.status&&setTimeout((()=>{r("/")}),3e3)}))}),[e,r]);return h?(0,i.jsx)("div",{className:"loading-container",children:(0,i.jsx)("p",{children:" "})}):g?(0,i.jsxs)("div",{className:"error-container",children:[(0,i.jsx)("h2",{children:"Kategoria nuk u gjet"}),(0,i.jsxs)("p",{children:['Kategoria "',e,'" nuk \xebsht\xeb e disponueshme. Do t\xeb ridrejtoheni n\xeb faqen kryesore pas disa sekondash...']}),(0,i.jsx)("p",{children:(0,i.jsx)("a",{href:"/",onClick:e=>{e.preventDefault(),r("/")},children:"Klikoni k\xebtu p\xebr t'u kthyer tani"})})]}):0===a.length?(0,i.jsxs)("div",{className:"category-page",children:[(0,i.jsx)("h1",{children:e}),(0,i.jsx)("p",{children:"Nuk ka grupe lajmesh t\xeb disponueshme n\xeb k\xebt\xeb kategori p\xebr momentin."}),(0,i.jsx)(c.N_,{to:"/",children:"\u2190 Kthehu n\xeb Kryefaqe"})]}):(0,i.jsxs)("div",{className:"category-page",children:[(0,i.jsx)("h1",{children:e}),(0,i.jsx)("ul",{children:a.map((r=>{let[a,t]=r;if(!t||!t.articles||0===t.articles.length)return null;const s=t.articles[0];return(0,i.jsxs)("li",{className:"news-cluster",children:[(0,i.jsxs)("div",{className:"cluster-header",children:[s.image_url&&(0,i.jsx)("img",{src:s.image_url,referrerPolicy:"no-referrer",alt:"",className:"article-image",onError:e=>{e.target.src="/fallback.jpg"}}),(0,i.jsxs)("div",{className:"article-details",children:[(0,i.jsx)("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",children:(0,i.jsxs)("h3",{className:"article-title",children:[s.title," - ",s.portal]})}),(0,i.jsx)("p",{className:"time-portal",children:"Para ".concat((0,l.L)(s.fetch_date)," - ").concat(s.portal)}),(0,i.jsx)("p",{children:(n=s.summary,n?n.split(" ").slice(0,40).join(" ")+"...":"")})]})]}),(0,i.jsx)("div",{className:"links-column",children:t.articles.slice(1,3).map((e=>(0,i.jsxs)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"portal-link separate-link",children:[e.title," - ",e.portal]},e.link)))}),(0,i.jsxs)("div",{className:"links-row",children:[t.articles.slice(5,10).map((e=>(0,i.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"portal-link",children:e.portal},e.link))),t.articles.length>10&&(0,i.jsx)("span",{children:"..."}),t.articles.length>=4&&(0,i.jsx)(c.N_,{to:"/category/".concat(e,"/cluster/").concat(a),className:"view-all-link",children:"Te gjitha lajmet"})]})]},a);var n}))})]})}},688:(e,r,a)=>{a.d(r,{L:()=>t});const t=e=>{const r=new Date,a=new Date(e.replace(" ","T")+(e.endsWith("Z")?"":"Z")),t=Math.floor((r-a)/6e4);if(console.log("Now: ".concat(r.toLocaleString())),console.log("Fetch: ".concat(a.toLocaleString())),console.log("Diff: ".concat(t," minutes")),t<0)return"tani";if(t<60)return"".concat(t," minutash");if(t<1440){const e=Math.floor(t/60);return"".concat(e," ore")}{const e=Math.floor(t/1440);return"".concat(e," dite")}}}}]);
//# sourceMappingURL=606.e3a716e2.chunk.js.map