"use strict";(self.webpackChunknews_aggregator=self.webpackChunknews_aggregator||[]).push([[821],{821:(e,a,r)=>{r.r(a),r.d(a,{default:()=>o});var t=r(43),s=r(213),c=r(475),l=r(688),n=r(579);const i=e=>{let{category:a,topClusters:r,limitSummary:t}=e;return(0,n.jsxs)("div",{className:"category-preview",children:[(0,n.jsx)("h2",{children:(0,n.jsx)(c.N_,{to:"/category/".concat(a),children:a})}),(0,n.jsx)("ul",{children:r.map((e=>{let[r,s]=e;return(0,n.jsxs)("li",{className:"news-cluster",children:[(0,n.jsxs)("div",{className:"cluster-header",children:[s.articles[0].image_url&&(0,n.jsx)("img",{src:s.articles[0].image_url,referrerPolicy:"no-referrer",alt:"",className:"article-image",onError:e=>{e.target.src="/fallback.jpg"}}),(0,n.jsxs)("div",{className:"article-details",children:[(0,n.jsx)("a",{href:s.articles[0].link,target:"_blank",rel:"noopener noreferrer",children:(0,n.jsxs)("h3",{className:"article-title",children:[s.articles[0].title," - ",s.articles[0].portal]})}),(0,n.jsx)("p",{className:"time-portal",children:"Para ".concat((0,l.L)(s.articles[0].fetch_date)," - ").concat(s.articles[0].portal)}),(0,n.jsx)("p",{children:t(s.articles[0].summary)})]})]}),(0,n.jsx)("div",{className:"links-column",children:s.articles.slice(1,3).map((e=>(0,n.jsxs)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"portal-link separate-link",children:[e.title," - ",e.portal]},e.link)))}),(0,n.jsxs)("div",{className:"links-row",children:[s.articles.slice(6,10).map((e=>(0,n.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"portal-link",children:e.portal},e.link))),s.articles.length>10&&(0,n.jsx)("span",{children:"..."}),s.articles.length>=4&&(0,n.jsx)(c.N_,{to:"/category/".concat(a,"/cluster/").concat(r),className:"view-all-link",children:"Te gjitha lajmet"})]})]},r)}))})]})},o=()=>{const[e,a]=(0,t.useState)([]),[r,c]=(0,t.useState)({}),[l,o]=(0,t.useState)(!0),[d,h]=(0,t.useState)(0);(0,t.useEffect)((()=>{console.log("Fetching categories..."),s.A.get("".concat("https://news-aggregator-backend-4zpx.onrender.com","/categories")).then((e=>{console.log("Categories fetched:",e.data),a(e.data),g(e.data)})).catch((e=>{console.error("Error fetching categories:",e),o(!1)}))}),[]);const g=async e=>{const a={};let r=0;const t=e.map((async t=>{try{const c=await s.A.get("".concat("https://news-aggregator-backend-4zpx.onrender.com","/category/").concat(t)),l=Object.entries(c.data).slice(0,3);return a[t]=l,r++,h(Math.round(r/e.length*100)),{category:t,data:l}}catch(c){return console.error("Error fetching data for category ".concat(t,":"),c),a[t]=[],r++,h(Math.round(r/e.length*100)),{category:t,data:[]}}}));await Promise.all(t),c(a),o(!1)},m=e=>e.split(" ").slice(0,40).join(" ")+"...";return l?(0,n.jsx)("div",{className:"loading-container",children:(0,n.jsx)("div",{className:"progress-bar",children:(0,n.jsx)("div",{className:"progress-fill",style:{width:"".concat(d,"%")}})})}):(0,n.jsx)("div",{className:"categories",children:0===e.length?(0,n.jsx)("p",{children:"No categories available"}):e.map((e=>(0,n.jsx)(i,{category:e,topClusters:r[e]||[],limitSummary:m},e)))})}},688:(e,a,r)=>{r.d(a,{L:()=>t});const t=e=>{const a=new Date,r=new Date(e),t=Math.floor((a-r)/6e4);if(t<60)return"".concat(t," minutash");if(t<1440){const e=Math.floor(t/60);return"".concat(e," ore")}{const e=Math.floor(t/1440);return"".concat(e," dite")}}}}]);
//# sourceMappingURL=821.5b5a6be4.chunk.js.map