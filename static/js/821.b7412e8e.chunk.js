"use strict";(self.webpackChunknews_aggregator=self.webpackChunknews_aggregator||[]).push([[821],{821:(e,a,r)=>{r.r(a),r.d(a,{default:()=>i});var t=r(43),c=r(213),s=r(475),l=r(688),n=r(579);const o=e=>{let{category:a,topClusters:r,limitSummary:t}=e;return(0,n.jsxs)("div",{className:"category-preview",children:[(0,n.jsx)("h2",{children:(0,n.jsx)(s.N_,{to:"/category/".concat(a),children:a})}),(0,n.jsx)("ul",{children:r.map((e=>{let[r,c]=e;return(0,n.jsxs)("li",{className:"news-cluster",children:[(0,n.jsxs)("div",{className:"cluster-header",children:[c.articles[0].image_url&&(0,n.jsx)("img",{src:c.articles[0].image_url,referrerPolicy:"no-referrer",alt:"",className:"article-image",onError:e=>{e.target.src="/fallback.jpg"}}),(0,n.jsxs)("div",{className:"article-details",children:[(0,n.jsx)("a",{href:c.articles[0].link,target:"_blank",rel:"noopener noreferrer",children:(0,n.jsxs)("h3",{className:"article-title",children:[c.articles[0].title," - ",c.articles[0].portal]})}),(0,n.jsx)("p",{className:"time-portal",children:"".concat((0,l.L)(c.articles[0].fetch_date)," - ").concat(c.articles[0].portal)}),(0,n.jsx)("p",{children:t(c.articles[0].summary)})]})]}),(0,n.jsx)("div",{className:"links-column",children:c.articles.slice(1,3).map((e=>(0,n.jsxs)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"portal-link separate-link",children:[e.title," - ",e.portal]},e.link)))}),(0,n.jsxs)("div",{className:"links-row",children:[c.articles.slice(6,10).map((e=>(0,n.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"portal-link",children:e.portal},e.link))),c.articles.length>10&&(0,n.jsx)("span",{children:"..."}),c.articles.length>=4&&(0,n.jsx)(s.N_,{to:"/category/".concat(a,"/cluster/").concat(r),className:"view-all-link",children:"Te gjitha lajmet"})]})]},r)}))})]})},i=()=>{const[e,a]=(0,t.useState)([]),[r,s]=(0,t.useState)({}),[l,i]=(0,t.useState)(!0),[g,h]=(0,t.useState)(0);(0,t.useEffect)((()=>{console.log("Fetching categories..."),c.A.get("".concat("https://news-aggregator-backend-4zpx.onrender.com","/categories")).then((e=>{console.log("Categories fetched:",e.data),a(e.data),d(e.data)})).catch((e=>{console.error("Error fetching categories:",e),i(!1)}))}),[]);const d=async e=>{const a={};let r=0;const t=e.map((async t=>{try{const s=await c.A.get("".concat("https://news-aggregator-backend-4zpx.onrender.com","/category/").concat(t)),l=Object.entries(s.data).slice(0,3);return a[t]=l,r++,h(Math.round(r/e.length*100)),{category:t,data:l}}catch(s){return console.error("Error fetching data for category ".concat(t,":"),s),a[t]=[],r++,h(Math.round(r/e.length*100)),{category:t,data:[]}}}));await Promise.all(t),s(a),i(!1)},m=e=>e.split(" ").slice(0,40).join(" ")+"...";return l?(0,n.jsx)("div",{className:"loading-container",children:(0,n.jsx)("div",{className:"progress-bar",children:(0,n.jsx)("div",{className:"progress-fill",style:{width:"".concat(g,"%")}})})}):(0,n.jsx)("div",{className:"categories",children:0===e.length?(0,n.jsx)("p",{children:"No categories available"}):e.map((e=>(0,n.jsx)(o,{category:e,topClusters:r[e]||[],limitSummary:m},e)))})}},688:(e,a,r)=>{r.d(a,{L:()=>t});const t=e=>{const a=new Date,r=new Date(e.replace(" ","T")+(e.endsWith("Z")?"":"Z")),t=Math.floor((a-r)/6e4);if(console.log("Now: ".concat(a.toLocaleString())),console.log("Fetch: ".concat(r.toLocaleString())),console.log("Diff: ".concat(t," minutes")),t<11)return"Tani";if(t<60)return"Para ".concat(t," minutash");if(t<1440){const e=Math.floor(t/60);return"Para ".concat(e," ore")}{const e=Math.floor(t/1440);return"Para ".concat(e," dite")}}}}]);
//# sourceMappingURL=821.b7412e8e.chunk.js.map