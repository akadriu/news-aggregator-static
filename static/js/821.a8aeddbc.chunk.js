"use strict";(self.webpackChunknews_aggregator=self.webpackChunknews_aggregator||[]).push([[821],{821:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});var r=t(43),s=t(213),c=t(475),l=t(688),n=t(579);const i=e=>{let{category:a,topClusters:t,limitSummary:r}=e;return(0,n.jsxs)("div",{className:"category-preview",children:[(0,n.jsx)("h2",{children:(0,n.jsx)(c.N_,{to:"/category/".concat(a),children:a})}),(0,n.jsx)("ul",{children:t.map((e=>{let[t,s]=e;return(0,n.jsxs)("li",{className:"news-cluster",children:[(0,n.jsxs)("div",{className:"cluster-header",children:[s.articles[0].image_url&&(0,n.jsx)("img",{src:s.articles[0].image_url,referrerPolicy:"no-referrer",alt:"",className:"article-image",onError:e=>{e.target.src="/fallback.jpg"}}),(0,n.jsxs)("div",{className:"article-details",children:[(0,n.jsx)("a",{href:s.articles[0].link,target:"_blank",rel:"noopener noreferrer",children:(0,n.jsxs)("h3",{className:"article-title",children:[s.articles[0].title," - ",s.articles[0].portal]})}),(0,n.jsx)("p",{className:"time-portal",children:"Para ".concat((0,l.L)(s.articles[0].fetch_date)," - ").concat(s.articles[0].portal)}),(0,n.jsx)("p",{children:r(s.articles[0].summary)})]})]}),(0,n.jsx)("div",{className:"links-column",children:s.articles.slice(1,3).map((e=>(0,n.jsxs)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"portal-link separate-link",children:[e.title," - ",e.portal]},e.link)))}),(0,n.jsxs)("div",{className:"links-row",children:[s.articles.slice(6,10).map((e=>(0,n.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"portal-link",children:e.portal},e.link))),s.articles.length>10&&(0,n.jsx)("span",{children:"..."}),s.articles.length>=4&&(0,n.jsx)(c.N_,{to:"/category/".concat(a,"/cluster/").concat(t),className:"view-all-link",children:"Te gjitha lajmet"})]})]},t)}))})]})},o=()=>{const[e,a]=(0,r.useState)([]),[t,c]=(0,r.useState)({}),[l,o]=(0,r.useState)(!0),[h,d]=(0,r.useState)(0);(0,r.useEffect)((()=>{console.log("Fetching categories..."),s.A.get("".concat("http://localhost:8000","/categories")).then((e=>{console.log("Categories fetched:",e.data),a(e.data),g(e.data)})).catch((e=>{console.error("Error fetching categories:",e),o(!1)}))}),[]);const g=async e=>{const a={};let t=0;const r=e.map((async r=>{try{const c=await s.A.get("".concat("http://localhost:8000","/category/").concat(r)),l=Object.entries(c.data).slice(0,3);return a[r]=l,t++,d(Math.round(t/e.length*100)),{category:r,data:l}}catch(c){return console.error("Error fetching data for category ".concat(r,":"),c),a[r]=[],t++,d(Math.round(t/e.length*100)),{category:r,data:[]}}}));await Promise.all(r),c(a),o(!1)},m=e=>e.split(" ").slice(0,40).join(" ")+"...";return l?(0,n.jsx)("div",{className:"loading-container",children:(0,n.jsx)("div",{className:"progress-bar",children:(0,n.jsx)("div",{className:"progress-fill",style:{width:"".concat(h,"%")}})})}):(0,n.jsx)("div",{className:"categories",children:0===e.length?(0,n.jsx)("p",{children:"No categories available"}):e.map((e=>(0,n.jsx)(i,{category:e,topClusters:t[e]||[],limitSummary:m},e)))})}},688:(e,a,t)=>{t.d(a,{L:()=>r});const r=e=>{const a=new Date,t=new Date(e),r=Math.floor((a-t)/6e4);if(r<0)return"tani";if(r<60)return"".concat(r," minutash");if(r<1440){const e=Math.floor(r/60);return"".concat(e," ore")}{const e=Math.floor(r/1440);return"".concat(e," dite")}}}}]);
//# sourceMappingURL=821.a8aeddbc.chunk.js.map