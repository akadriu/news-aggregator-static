"use strict";(self.webpackChunknews_aggregator=self.webpackChunknews_aggregator||[]).push([[381],{381:(e,a,s)=>{s.r(a),s.d(a,{default:()=>t});var r=s(43),l=s(579);const t=()=>{const[e,a]=(0,r.useState)(""),[s,t]=(0,r.useState)(""),[i,n]=(0,r.useState)(""),[c,o]=(0,r.useState)(!1),[u,h]=(0,r.useState)(""),[d,m]=(0,r.useState)([]),[v,p]=(0,r.useState)(0),[j,x]=(0,r.useState)(!1),[g,N]=(0,r.useState)(null),[b,k]=(0,r.useState)(!1);(0,r.useEffect)((()=>{const a=setTimeout((()=>{e.trim()&&(async()=>{if(!e.trim())return m([]),void p(0);x(!0),N(null);try{const l="http://localhost:8000",t=new URLSearchParams({keyword:e.trim(),...s&&{category:(r=s,{"Kosov\xeb":"Kosov\xeb",Kosove:"Kosov\xeb","Roz\xeb":"Roz\xeb",Roze:"Roz\xeb","Kultur\xeb":"Kultur\xeb",Kultura:"Kultur\xeb"}[r]||r)},...i.trim()&&{portal:i.trim()},...c?{exact_match:"true"}:{},...u&&!isNaN(Number(u))?{limit:String(Number(u))}:{}}),n=await fetch("".concat(l,"/api/search/advanced?").concat(t));if(!n.ok)throw new Error("Search failed");const o=await n.json();if(!o.success)throw new Error(o.error||"Search failed");var a;m(o.results||[]),p(Number(null!==(a=o.count)&&void 0!==a?a:(o.results||[]).length))}catch(l){N("Gabim gjat\xeb k\xebrkimit. Provoni p\xebrs\xebri."),console.error("Search error:",l)}finally{x(!1)}var r})()}),500);return()=>clearTimeout(a)}),[e,s,i,c,u]);return(0,l.jsx)("div",{className:"search-sidebar",children:(0,l.jsxs)("div",{className:"search-container",children:[(0,l.jsx)("h4",{children:"K\xebrko Lajmet e Fundit"}),(0,l.jsx)("div",{className:"search-field",children:(0,l.jsx)("input",{type:"text",placeholder:"Shkruani fjal\xebn ky\xe7e...",value:e,onChange:e=>a(e.target.value),className:"search-input"})}),(0,l.jsx)("div",{className:"search-field",children:(0,l.jsx)("select",{value:s,onChange:e=>t(e.target.value),className:"search-select",children:[{value:"",label:"T\xeb gjitha kategorit\xeb"},{value:"Kosov\xeb",label:"Kosov\xeb"},{value:"Maqedoni",label:"Maqedoni"},{value:"Bota",label:"Bota"},{value:"Ekonomi",label:"Ekonomi"},{value:"Sport",label:"Sport"},{value:"Kultur\xeb",label:"Kultur\xeb"},{value:"Kronika",label:"Kronika"},{value:"Roz\xeb",label:"Roz\xeb"}].map((e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value)))})}),(0,l.jsx)("button",{type:"button",className:"clear-btn",onClick:()=>k((e=>!e)),style:{marginBottom:8},children:b?"Mbyll Opsionet e Avancuara":"Opsionet e Avancuara"}),b&&(0,l.jsxs)("div",{className:"advanced-box",style:{marginBottom:8},children:[(0,l.jsx)("div",{className:"search-field",children:(0,l.jsx)("input",{type:"text",placeholder:"Portal (p.sh. Gazeta Express)",value:i,onChange:e=>n(e.target.value),className:"search-input"})}),(0,l.jsx)("div",{className:"search-field",children:(0,l.jsx)("input",{type:"number",min:"1",placeholder:"Limit (opsionale)",value:u,onChange:e=>h(e.target.value),className:"search-input"})})]}),(e||s||i||c||u)&&(0,l.jsx)("button",{onClick:()=>{a(""),t(""),n(""),o(!1),h(""),m([]),p(0),N(null)},className:"clear-btn",children:"Pastro"}),j&&(0,l.jsx)("div",{className:"search-loading",children:"K\xebrkoj..."}),g&&(0,l.jsx)("div",{className:"search-error",children:g}),(0,l.jsxs)("div",{className:"search-results",children:[v>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"results-header",children:["Gjetur ",v," rezultate"]}),d.map(((e,a)=>(0,l.jsx)("div",{className:"search-result-item",children:(0,l.jsxs)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"result-link",children:[(0,l.jsx)("div",{className:"result-title",children:e.title}),(0,l.jsx)("div",{className:"result-portal",children:e.portal}),e.summary&&(0,l.jsxs)("div",{className:"result-summary",children:[e.summary.substring(0,150),"..."]})]})},a)))]}),e.trim()&&!j&&0===v&&!g&&(0,l.jsxs)("div",{className:"no-results",children:['Nuk u gjet\xebn rezultate p\xebr "',e,'"',s&&' n\xeb kategorin\xeb "'.concat(s,'"'),i&&' nga portali "'.concat(i,'"'),c&&" (k\xebrkim i sakt\xeb)"]})]})]})})}}}]);
//# sourceMappingURL=381.c3c30e75.chunk.js.map