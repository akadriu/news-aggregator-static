"use strict";(self.webpackChunknews_aggregator=self.webpackChunknews_aggregator||[]).push([[381],{381:(e,a,s)=>{s.r(a),s.d(a,{default:()=>l});var r=s(43),t=s(579);const l=()=>{const[e,a]=(0,r.useState)(""),[s,l]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[c,o]=(0,r.useState)(!1),[u,d]=(0,r.useState)(""),[h,m]=(0,r.useState)([]),[v,p]=(0,r.useState)(0),[j,g]=(0,r.useState)(!1),[x,N]=(0,r.useState)(null),[b,k]=(0,r.useState)(!1);(0,r.useEffect)((()=>{const a=setTimeout((()=>{e.trim()&&(async()=>{if(!e.trim())return m([]),void p(0);g(!0),N(null);try{const t="https://news-aggregator-backend-4zpx.onrender.com",l=new URLSearchParams({keyword:e.trim(),...s&&{category:(r=s,{"Kosov\xeb":"Kosov\xeb",Kosove:"Kosov\xeb","Roz\xeb":"Roz\xeb",Roze:"Roz\xeb","Kultur\xeb":"Kultur\xeb",Kultura:"Kultur\xeb"}[r]||r)},...n.trim()&&{portal:n.trim()},...c?{exact_match:"true"}:{},...u&&!isNaN(Number(u))?{limit:String(Number(u))}:{}}),i=await fetch("".concat(t,"/api/search/advanced?").concat(l));if(!i.ok)throw new Error("Search failed");const o=await i.json();if(!o.success)throw new Error(o.error||"Search failed");var a;m(o.results||[]),p(Number(null!==(a=o.count)&&void 0!==a?a:(o.results||[]).length))}catch(t){N("Gabim gjat\xeb k\xebrkimit. Provoni p\xebrs\xebri."),console.error("Search error:",t)}finally{g(!1)}var r})()}),500);return()=>clearTimeout(a)}),[e,s,n,c,u]);return(0,t.jsx)("div",{className:"search-sidebar",children:(0,t.jsxs)("div",{className:"search-container",children:[(0,t.jsx)("h4",{children:"K\xebrko Lajmet e Fundit"}),(0,t.jsx)("div",{className:"search-field",children:(0,t.jsx)("input",{type:"text",placeholder:"Shkruani fjal\xebn ky\xe7e...",value:e,onChange:e=>a(e.target.value),className:"search-input"})}),(0,t.jsx)("div",{className:"search-field",children:(0,t.jsx)("select",{value:s,onChange:e=>l(e.target.value),className:"search-select",children:[{value:"",label:"T\xeb gjitha kategorit\xeb"},{value:"Kosov\xeb",label:"Kosov\xeb"},{value:"Maqedoni",label:"Maqedoni"},{value:"Bota",label:"Bota"},{value:"Ekonomi",label:"Ekonomi"},{value:"Sport",label:"Sport"},{value:"Kultur\xeb",label:"Kultur\xeb"},{value:"Kronika",label:"Kronika"},{value:"Roz\xeb",label:"Roz\xeb"}].map((e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value)))})}),(0,t.jsx)("button",{type:"button",className:"clear-btn",onClick:()=>k((e=>!e)),style:{marginBottom:8},children:b?"Mbyll Opsionet e Avancuara":"Opsionet e Avancuara"}),b&&(0,t.jsxs)("div",{className:"advanced-box",style:{marginBottom:8},children:[(0,t.jsx)("div",{className:"search-field",children:(0,t.jsx)("input",{type:"text",placeholder:"Portal (p.sh. Gazeta Express)",value:n,onChange:e=>i(e.target.value),className:"search-input"})}),(0,t.jsx)("div",{className:"search-field",children:(0,t.jsx)("input",{type:"number",min:"1",placeholder:"Limit (opsionale)",value:u,onChange:e=>d(e.target.value),className:"search-input"})})]}),(e||s||n||c||u)&&(0,t.jsx)("button",{onClick:()=>{a(""),l(""),i(""),o(!1),d(""),m([]),p(0),N(null)},className:"clear-btn",children:"Pastro"}),j&&(0,t.jsx)("div",{className:"search-loading",children:"K\xebrkoj..."}),x&&(0,t.jsx)("div",{className:"search-error",children:x}),(0,t.jsxs)("div",{className:"search-results",children:[v>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"results-header",children:["Gjetur ",v," rezultate"]}),h.map(((e,a)=>(0,t.jsx)("div",{className:"search-result-item",children:(0,t.jsxs)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"result-link",children:[(0,t.jsx)("div",{className:"result-title",children:e.title}),(0,t.jsx)("div",{className:"result-portal",children:e.portal}),e.summary&&(0,t.jsxs)("div",{className:"result-summary",children:[e.summary.substring(0,150),"..."]})]})},a)))]}),e.trim()&&!j&&0===v&&!x&&(0,t.jsxs)("div",{className:"no-results",children:['Nuk u gjet\xebn rezultate p\xebr "',e,'"',s&&' n\xeb kategorin\xeb "'.concat(s,'"'),n&&' nga portali "'.concat(n,'"'),c&&" (k\xebrkim i sakt\xeb)"]})]})]})})}}}]);
//# sourceMappingURL=381.207a370c.chunk.js.map