{"version":3,"file":"static/js/606.9f1af775.chunk.js","mappings":"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","sources":["components/CategoryPage.js","utils/timeUtils.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { timeDifference } from '../utils/timeUtils';\nimport { Link } from 'react-router-dom';\n\nconst CategoryPage = () => {\n    const { category } = useParams();\n    const navigate = useNavigate();\n    const [clusters, setClusters] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        setLoading(true);\n        setError(null);\n        \n        axios.get(`${process.env.REACT_APP_API_URL}/category/${category}`)\n            .then(response => {\n                if (response.data && typeof response.data === 'object') {\n                    const sortedClusters = Object.entries(response.data);\n                    setClusters(sortedClusters);\n                } else {\n                    setClusters([]);\n                }\n                setLoading(false);\n            })\n            .catch(error => {\n                console.error(`Error fetching data for category ${category}:`, error);\n                setError(error);\n                setLoading(false);\n                \n                // If category not found, redirect to home after 3 seconds\n                if (error.response && error.response.status === 404) {\n                    setTimeout(() => {\n                        navigate('/');\n                    }, 3000);\n                }\n            });\n    }, [category, navigate]);\n\n    const limitSummary = (summary) => {\n        if (!summary) return '';\n        return summary.split(' ').slice(0, 40).join(' ') + '...';\n    };\n\n    if (loading) return <div>Duke u ngarkuar...</div>;\n    \n    if (error) {\n        return (\n            <div className=\"error-container\">\n                <h2>Kategoria nuk u gjet</h2>\n                <p>Kategoria \"{category}\" nuk është e disponueshme. Do të ridrejtoheni në faqen kryesore pas disa sekondash...</p>\n                <p>\n                    <a href=\"/\" onClick={(e) => {\n                        e.preventDefault();\n                        navigate('/');\n                    }}>\n                        Klikoni këtu për t'u kthyer tani\n                    </a>\n                </p>\n            </div>\n        );\n    }\n\n    if (clusters.length === 0) {\n        return (\n            <div className=\"category-page\">\n                <h1>{category}</h1>\n                <p>Nuk ka grupe lajmesh të disponueshme në këtë kategori për momentin.</p>\n                <Link to=\"/\">← Kthehu në Kryefaqe</Link>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"category-page\">\n            <h1>{category}</h1>\n            <ul>\n                {clusters.map(([clusterId, clusterData]) => {\n                    // Safety check for cluster data structure\n                    if (!clusterData || !clusterData.articles || clusterData.articles.length === 0) {\n                        return null; // Skip invalid clusters\n                    }\n\n                    const firstArticle = clusterData.articles[0];\n                    \n                    return (\n                        <li key={clusterId} className=\"news-cluster\">\n                            <div className=\"cluster-header\">\n                                {firstArticle.image_url && (\n                                    <img \n                                        src={firstArticle.image_url} \n                                        referrerPolicy=\"no-referrer\" \n                                        alt=\"\" \n                                        className=\"article-image\" \n                                        onError={(e) => { e.target.src = \"/fallback.jpg\"; }} \n                                    />\n                                )}\n                                <div className=\"article-details\">\n                                    <a href={firstArticle.link} target=\"_blank\" rel=\"noopener noreferrer\">\n                                        <h3 className=\"article-title\">{firstArticle.title} - {firstArticle.portal}</h3>\n                                    </a>\n                                    <p className=\"time-portal\">{`Para ${timeDifference(firstArticle.fetch_date)} - ${firstArticle.portal}`}</p>\n                                    <p>{limitSummary(firstArticle.summary)}</p>\n                                </div>\n                            </div>\n                            <div className=\"links-column\">\n                                {clusterData.articles.slice(1, 3).map(article => (\n                                    <a key={article.link} href={article.link} target=\"_blank\" rel=\"noopener noreferrer\" className=\"portal-link separate-link\">\n                                        {article.title} - {article.portal}\n                                    </a>\n                                ))}\n                            </div>\n                            <div className=\"links-row\">\n                                {clusterData.articles.slice(5, 10).map(article => (\n                                    <a key={article.link} href={article.link} target=\"_blank\" rel=\"noopener noreferrer\" className=\"portal-link\">\n                                        {article.portal}\n                                    </a>\n                                ))}\n                                {clusterData.articles.length > 10 && <span>...</span>}\n                                {clusterData.articles.length >= 4 && (<Link to={`/category/${category}/cluster/${clusterId}`} className=\"view-all-link\">Te gjitha lajmet</Link>)}\n                            </div>\n                        </li>\n                    );\n                })}\n            </ul>\n        </div>\n    );\n};\n\nexport default CategoryPage;","export const timeDifference = (fetchDate) => {\n    const now = new Date();\n    const fetchTime = new Date(fetchDate);\n    const diffInMinutes = Math.floor((now - fetchTime) / (1000 * 60) - 120);\n\n    if (diffInMinutes < 60) {\n        return `${diffInMinutes} minuta`;\n    } else if (diffInMinutes < 24 * 60) {\n        const diffInHours = Math.floor(diffInMinutes / 60);\n        return `${diffInHours} ore`;\n    } else {\n        const diffInDays = Math.floor(diffInMinutes / (24 * 60));\n        return `${diffInDays} dite`;\n    }\n};\n"],"names":["CategoryPage","category","useParams","navigate","useNavigate","clusters","setClusters","useState","loading","setLoading","error","setError","useEffect","axios","get","concat","process","then","response","data","sortedClusters","Object","entries","catch","console","status","setTimeout","_jsx","children","_jsxs","className","href","onClick","e","preventDefault","length","Link","to","map","_ref","clusterId","clusterData","articles","firstArticle","image_url","src","referrerPolicy","alt","onError","target","link","rel","title","portal","timeDifference","fetch_date","summary","split","slice","join","article","fetchDate","now","Date","fetchTime","diffInMinutes","Math","floor","diffInHours","diffInDays"],"sourceRoot":""}